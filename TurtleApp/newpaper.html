<!DOCTYPE html>
<html>

<body>

	<canvas id="myCanvas" resize></canvas>
	
</body>


<head>
<!-- Load the Paper.js library -->
<script type="text/javascript" src="http://www.andrewkind.com/paper.js"></script>
<!-- Define inlined PaperScript associate it with myCanvas -->


<script type="text/paperscript" canvas="myCanvas">
		

	//turtle starts at 90 degrees (looking up) to x-axis
	var turtleAngle = 0;


	//turtle image
	var raster = new Raster('turtle.png');

	//prop turtle for display
	var rasterEnd = new Raster('turtle.png');

	// Move the raster to the center of the view
	
	// home coordinates
	var xhome = 80;
	var yhome = 120;
	
	var point1 = new Point(xhome, yhome);

	// turtle coordinates (start at home)
	var xcoord = xhome;
	var ycoord = yhome;

	var xend =30;
	var yend = 300;
	
	// image position
	raster.position.x = xcoord;
	raster.position.y = ycoord;
	rasterEnd.position.x = xend;
	rasterEnd.position.y = yend;
	
	rasterEnd.scale(0.2);
	// Scale the image by 50%
	raster.scale(0.5);
	
	//rotate turtle to appropriate start
	raster.rotate(turtleAngle);
	
	//speed of movement
	var speed = 0.01;

		
	
	// create path object for turtle
	var turtlePath = new Path();
	turtlePath.strokeColor = 'blue';
	turtlePath.add(new Point (xcoord, ycoord));
	
	var turtlePath2 = new Path();
	turtlePath2.strokeColor = 'red';
	
	
	//Lets create a list of events...
	
	var angle = 90; //this is to keep track of the turtles angle.
	
	
	//sample commands: Pentagon
	var event0 = [];
	event0.command = "rotate";
	event0.rotate = 90;
	event0.xstart = xcoord;
	event0.ystart = ycoord;
	event0.xend = xend;
	event0.yend = yend;
	
	var event1 = [];
	event1.command = "rotate";
	event1.rotate = -90;
	event1.xstart = xcoord;
	event1.ystart = ycoord;
	event1.xend = xend;
	event1.yend = yend;
	
	var event2 = [];
	event2.command = "line";
	event2.xstart = xcoord;
	event2.ystart = ycoord;
	event2.xend = 30;
	event2.yend = 300;
	
	var event3 = [];
	event3.command = "line";
	event3.xstart = xcoord;
	event3.ystart = ycoord;
	event3.xend = 200;
	event3.yend = 50;
	
	
	//list of events
	var eventList = [];
	
	//add samples into event list
	eventList.push (event0);
	eventList.push (event1);
	eventList.push (event2);
	eventList.push (event3);
		
	 //distance to x and y
	 var distancex;
	 var distancey;
	 
	 /*Claudine did you do this properly? I added some more logic (look a bit below)
	  this currently sets up the first line movement.. but not others because we use the same variable
	
	       .-.
          |_o_|    help me obiwan claudiny youre my only hope
         /|='.|\
         ||"_'||
         /|-v-|\
         "" ^ ""
	 
	 */
	 
	 if (xend >xhome ) distancex = xend - xhome;
	 else distancex = xhome - xend;
	
	 if (yend >yhome ) distancey = yend - yhome;
	 else distancey = yhome - yend;
	
	//check which direction to go in (see above comment)
	if (xend < xcoord) {
		distancex = -distancex;
	}
	if (yend > ycoord) {
		distancey = -distancey;
	}
		
	//lets rotate the turtle
	raster.rotate(turtleAngle);
	
	//create an index for event list.
	
	//loop to calculate any LINES distance x and y
	
	
	var x = 0; //event index
	
	function onFrame(event) {
	
			//check if we have an event to be done
			if (x < eventList.length) {
		
			if (eventList[x].command == "line") {
				
				//keep drawing line until we reach end point
				if (xcoord != eventList[x].xend) {
					
					
					var gox = xcoord + distancex * speed;
					var goy = ycoord - distancey * speed;
					
					turtlePath.add(new Point (gox,goy));
					
					raster.position.x = gox;
					raster.position.y = goy;
					xcoord = gox;
					ycoord = goy;
					
				}
				else {
					x++;
				}
			}
			
			if (eventList[x].command == "rotate") {
				console.log("rotate");
				if (eventList[x].rotate > 0) {
				raster.rotate(1); //rotate clockwise
				eventList[x].rotate--; //decrease angle until we hit 0
				}
				
				
				else if (eventList[x].rotate < 0) {
				raster.rotate(-1); //rotate counterclockwise
				eventList[x].rotate++; //increase angle until we hit 0
				}
				else {
				// we are done rotating 
				x++;
				}
			}
		}  
	} //END ON FRAME FUNCTION
	// test function for onkeydown
	  
	/*function onKeyDown(event) {
	raster.translate(-1,0); 
	raster.rotate(1);
	} */
	
</script>

</head>


</html>