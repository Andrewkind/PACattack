<!DOCTYPE html>
<html>

<body>

	<canvas id="myCanvas" resize></canvas>
	
</body>


<head>
<!-- Load the Paper.js library -->
<script type="text/javascript" src="http://www.andrewkind.com/paper.js"></script>
<!-- Define inlined PaperScript associate it with myCanvas -->


<script type="text/paperscript" canvas="myCanvas">
		
	// Create a raster item using the image tag with id='mona'
	var raster = new Raster('turtle.png');

	// Move the raster to the center of the view
	
	// home coordinates
	var xhome = 150;
	var yhome = 150;
	
	// turtle coordinates
	var xcoord = xhome;
	var ycoord = yhome;
	
	// image position
	raster.position = (xcoord, xcoord);

	// Scale the image by 50%
	raster.scale(0.5);

	// create path object for turtle
	var turtlePath = new Path();
	turtlePath.strokeColor = 'black';
	turtlePath.add(new Point (xcoord, xcoord));
	
	//Lets create a list of events...
	
	angle = 0; //this is to keep track of the turtles angle.
	
	
	//sample commands 
	var event1 = [];
	event1.command = "forward";
	event1.amount = 40;
	
	var event2 = [];
	event2.command = "right";
	event2.amount = 67;
	
	var event3 = [];
	event3.command = "forward";
	event3.amount = 30;
	
	var event4 = [];
	event4.command = "right";
	event4.amount = 45;
	
	//list of events
	var eventList = [];
	
	//add samples into event list
	eventList.push (event1);
	eventList.push (event2);
	eventList.push (event3);
	eventList.push (event4);
	
	
	var x = 0;
	function onFrame(event) {				
		//we must check which command is issued, starting at x = 0 (first event in list eventList)
			if (eventList[x].command == "forward") {
			
				//check if we have amount value (our distance to travel)
				if (eventList[x].amount > 0) {
					//move turtle
					raster.translate(0,-1); 
				
					//decrement distance
					eventList[x].amount--;
					ycoord--;
					turtlePath.add(new Point (xcoord, ycoord)); // increase path
				}
				else {
					//check if we have to increment to next event, or are we done
					if (x < eventList.length-1) {
					x++; 
					console.log("finished event " + x);
					}
				}
			}
			
			if (eventList[x].command == "right") {
			
				if (eventList[x].amount > 0) {
					//rotate one degree
					raster.rotate(1); 
				
					//decrement our event angle
					eventList[x].amount--;
					angle++; //increment our turtle angle
				}
				else {
					//check if we have to increment to next event, or are we done
					if (x < eventList.length-1) {
				
					x++; 
					console.log("finished event " + x);
					}
				}
			}
			
			if (eventList[x].command == "forwardAngle") {
			
				//we need to figure out x and y points to reach
				var xDest;
				var yDest;
				
				var angleRadians = (angle * (Math.PI / 180))
				
				yDest = eventList[x].amount * Math.sin(angleRadians);
				xDest = eventList[x].amount * Math.cos(angleRadians);
			
				turtlePath.add(new Point (xDest, yDest)); // increase path
			}				
			
	}  //END ON FRAME FUNCTION
	
	// test function for onkeydown
	/*  
	function onKeyDown(event) {
	raster.translate(0,-1); 
	raster.rotate(1);
	} */
	
</script>

</head>


</html>